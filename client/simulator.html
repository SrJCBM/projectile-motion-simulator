<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Projectile Motion Simulator - Interactive Physics Simulation">
    <meta name="theme-color" content="#2a9d8f">
    
    <title>Simulator - Projectile Motion Simulator</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ui-components.css">
    
    <!-- MathJax for formula rendering -->
    <script>
        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Header -->
    <header class="header">
        <div class="header__container">
            <div class="header__brand">
                <a href="index.html" class="header__brand-link">
                    <svg class="header__icon" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>
                    </svg>
                    <h1 class="header__title">Projectile Motion Simulator</h1>
                </a>
            </div>
            <div class="header__actions">
                <!-- History Toggle (only for logged users) -->
                <button id="history-toggle-btn" class="btn btn--small btn--outline" title="Simulation History" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                    History
                </button>
                <button id="save-btn" class="btn btn--small btn--outline" title="Save simulation" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    Save
                </button>
                <!-- User Menu -->
                <div id="user-menu" class="user-menu" style="display: none;">
                    <span id="user-name" class="user-menu__name"></span>
                    <button id="logout-btn" class="btn btn--small btn--ghost" title="Logout">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                    </button>
                </div>
                <!-- Login Button (for guests) -->
                <a id="login-link" href="login.html" class="btn btn--small btn--primary">Sign In</a>
            </div>
        </div>
    </header>

    <!-- History Sidebar -->
    <aside id="history-sidebar" class="history-sidebar" aria-label="Simulation History">
        <div class="history-sidebar__header">
            <h2 class="history-sidebar__title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                Simulation History
            </h2>
            <button id="history-close-btn" class="history-sidebar__close" title="Close">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div id="history-list" class="history-sidebar__list">
            <!-- History items will be loaded here -->
            <p class="history-sidebar__empty">No simulations saved yet.</p>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main id="main-content" class="main">
        <div class="simulator">
            <!-- Control Panel -->
            <aside class="control-panel" aria-label="Simulation Parameters">
                <h2 class="control-panel__title">Parameters</h2>
                
                <!-- Initial Velocity -->
                <div class="control-group">
                    <label for="velocity-slider" class="control-label">Initial velocity</label>
                    <div class="control-input-group">
                        <input type="range" id="velocity-slider" class="slider" min="0" max="100" value="25" step="1">
                        <div class="number-input-wrapper">
                            <input type="number" id="velocity-input" class="number-input" min="0" max="100" value="25" step="1">
                            <span class="input-unit">m/s</span>
                        </div>
                    </div>
                </div>
                
                <!-- Launch Angle -->
                <div class="control-group">
                    <label for="angle-slider" class="control-label">Angle</label>
                    <div class="control-input-group">
                        <input type="range" id="angle-slider" class="slider" min="0" max="90" value="45" step="1">
                        <div class="number-input-wrapper">
                            <input type="number" id="angle-input" class="number-input" min="0" max="90" value="45" step="1">
                            <span class="input-unit">¬∞</span>
                        </div>
                    </div>
                </div>
                
                <!-- Initial Height -->
                <div class="control-group">
                    <label for="height-input" class="control-label">Initial height</label>
                    <div class="control-input-group control-input-group--height">
                        <div class="height-icon" aria-hidden="true">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12,2 22,20 2,20"/>
                            </svg>
                        </div>
                        <div class="number-input-wrapper">
                            <input type="number" id="height-input" class="number-input" min="0" max="100" value="2" step="0.5">
                            <span class="input-unit">m</span>
                        </div>
                    </div>
                </div>
                
                <!-- Gravity -->
                <div class="control-group">
                    <label for="gravity-select" class="control-label">Gravity</label>
                    <div class="control-input-group control-input-group--gravity">
                        <div class="gravity-icon" aria-hidden="true">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="2" y1="12" x2="22" y2="12"/>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                            </svg>
                        </div>
                        <select id="gravity-select" class="select-input">
                            <option value="9.81">üåç 9.81 m/s¬≤</option>
                            <option value="1.62">üåô 1.62 m/s¬≤</option>
                            <option value="3.72">üî¥ 3.72 m/s¬≤</option>
                        </select>
                    </div>
                </div>
                
                <!-- Buttons -->
                <div class="control-buttons">
                    <button id="simulate-btn" class="btn btn--primary" type="button">Simulate</button>
                    <div class="control-buttons__secondary">
                        <button id="pause-btn" class="btn btn--secondary" type="button" disabled>Pause</button>
                        <button id="reset-btn" class="btn btn--secondary" type="button" disabled>Reset</button>
                    </div>
                </div>
            </aside>
            
            <!-- Simulation Area -->
            <section class="simulation-area" aria-label="Simulation Display">
                <div class="canvas-container">
                    <canvas id="simulation-canvas" class="simulation-canvas">
                        Your browser does not support the canvas element.
                    </canvas>
                </div>
                
                <!-- Results -->
                <div class="results-panel" aria-live="polite">
                    <h2 class="results-panel__title">Simulation Results</h2>
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="19" x2="12" y2="5"/>
                                    <polyline points="5,12 12,5 19,12"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label">Maximum</span>
                                <span class="result-card__value"><span id="result-max-height">--</span><span class="result-card__unit">m</span></span>
                            </div>
                        </div>
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                    <polyline points="12,5 19,12 12,19"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label">Distance</span>
                                <span class="result-card__value"><span id="result-distance">--</span><span class="result-card__unit">m</span></span>
                            </div>
                        </div>
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label">Flight time</span>
                                <span class="result-card__value"><span id="result-flight-time">--</span><span class="result-card__unit">s</span></span>
                            </div>
                        </div>
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label">Final velocity</span>
                                <span class="result-card__value"><span id="result-final-velocity">--</span><span class="result-card__unit">m/s</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Formulas -->
                <details class="formulas-section">
                    <summary class="formulas-section__toggle">üìê View Physics Formulas</summary>
                    <div class="formulas-section__content">
                        <div class="formula-card">
                            <h3>Trajectory</h3>
                            <p class="formula">$y = x \tan(\theta) - \frac{gx^2}{2v_0^2\cos^2(\theta)}$</p>
                        </div>
                        <div class="formula-card">
                            <h3>Position</h3>
                            <p class="formula">$x(t) = v_0 \cos(\theta) \cdot t$</p>
                            <p class="formula">$y(t) = h_0 + v_0 \sin(\theta) \cdot t - \frac{1}{2}gt^2$</p>
                        </div>
                    </div>
                </details>
            </section>
        </div>
    </main>
    
    <footer class="footer">
        <p>Built with ‚ù§Ô∏è for Physics Students</p>
    </footer>

    <!-- History Overlay -->
    <div id="history-overlay" class="history-overlay"></div>
    
    <!-- Toast Notifications Container -->
    <div id="toast-container" class="toast-container"></div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
