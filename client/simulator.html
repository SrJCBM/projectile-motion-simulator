<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Simulador de Movimiento Proyectil - Simulaci칩n Interactiva de F칤sica">
    <meta name="theme-color" content="#2a9d8f">
    
    <title>Simulador - Movimiento Proyectil</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ui-components.css">
    
    <!-- MathJax for formula rendering -->
    <script>
        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
    <a href="#main-content" class="skip-link">Saltar al contenido principal</a>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" aria-hidden="true">
        <div class="loading-spinner"></div>
        <p class="loading-text" data-i18n="loading">Preparando simulaci칩n...</p>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header__container">
            <div class="header__brand">
                <a href="index.html" class="header__brand-link">
                    <svg class="header__icon" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>
                    </svg>
                    <h1 class="header__title" data-i18n="appTitle">Simulador de Movimiento Proyectil</h1>
                </a>
            </div>
            <div class="header__actions">
                <!-- Language Selector -->
                <div class="lang-selector">
                    <button class="lang-btn lang-btn--active" data-lang="es">ES</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>
                
                <!-- Theme Toggle -->
                <button id="theme-toggle" class="theme-toggle" aria-label="Cambiar tema">
                    <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                    <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                </button>
                
                <!-- History Toggle (only for logged users) -->
                <button id="history-toggle-btn" class="btn btn--small btn--outline" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                    <span data-i18n="history">Historial</span>
                </button>
                <button id="save-btn" class="btn btn--small btn--outline" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    <span data-i18n="save">Guardar</span>
                </button>
                <!-- PDF Download Button -->
                <button id="download-pdf-btn" class="btn btn--small btn--outline" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    <span data-i18n="downloadPDF">PDF</span>
                </button>
                <!-- User Menu -->
                <div id="user-menu" class="user-menu" style="display: none;">
                    <span id="user-name" class="user-menu__name"></span>
                    <button id="logout-btn" class="btn btn--small btn--ghost">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                    </button>
                </div>
                <!-- Login Button (for guests) -->
                <a id="login-link" href="login.html" class="btn btn--small btn--primary" data-i18n="signIn">Iniciar sesi칩n</a>
            </div>
        </div>
    </header>

    <!-- History Sidebar -->
    <aside id="history-sidebar" class="history-sidebar" aria-label="Historial de Simulaciones">
        <div class="history-sidebar__header">
            <h2 class="history-sidebar__title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                <span data-i18n="simulationHistory">Historial de Simulaciones</span>
            </h2>
            <button id="history-close-btn" class="history-sidebar__close" title="Cerrar">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div id="history-list" class="history-sidebar__list">
            <!-- History items will be loaded here -->
            <p class="history-sidebar__empty" data-i18n="noSimulations">No hay simulaciones guardadas.</p>
        </div>
    </aside>
    
    <!-- Main Content -->
    <main id="main-content" class="main">
        <div class="simulator">
            <!-- Control Panel -->
            <aside class="control-panel" aria-label="Par치metros de Simulaci칩n">
                <h2 class="control-panel__title" data-i18n="parameters">Par치metros</h2>
                
                <!-- Initial Velocity -->
                <div class="control-group">
                    <label for="velocity-slider" class="control-label" data-i18n="initialVelocity">Velocidad inicial</label>
                    <div class="control-input-group">
                        <input type="range" id="velocity-slider" class="slider" min="0" max="100" value="25" step="1" aria-describedby="velocity-help">
                        <div class="number-input-wrapper">
                            <input type="number" id="velocity-input" class="number-input" min="0" max="100" value="25" step="1">
                            <span class="input-unit">m/s</span>
                        </div>
                    </div>
                </div>
                
                <!-- Launch Angle -->
                <div class="control-group">
                    <label for="angle-slider" class="control-label" data-i18n="angle">츼ngulo</label>
                    <div class="control-input-group">
                        <input type="range" id="angle-slider" class="slider" min="0" max="90" value="45" step="1">
                        <div class="number-input-wrapper">
                            <input type="number" id="angle-input" class="number-input" min="0" max="90" value="45" step="1">
                            <span class="input-unit">춿</span>
                        </div>
                    </div>
                </div>
                
                <!-- Initial Height -->
                <div class="control-group">
                    <label for="height-input" class="control-label" data-i18n="initialHeight">Altura inicial</label>
                    <div class="control-input-group control-input-group--height">
                        <div class="height-icon" aria-hidden="true">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12,2 22,20 2,20"/>
                            </svg>
                        </div>
                        <div class="number-input-wrapper">
                            <input type="number" id="height-input" class="number-input" min="0" max="100" value="2" step="0.5">
                            <span class="input-unit">m</span>
                        </div>
                    </div>
                </div>
                
                <!-- Gravity -->
                <div class="control-group">
                    <label for="gravity-select" class="control-label" data-i18n="gravity">Gravedad</label>
                    <div class="control-input-group control-input-group--gravity">
                        <div class="gravity-icon" aria-hidden="true">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="2" y1="12" x2="22" y2="12"/>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                            </svg>
                        </div>
                        <select id="gravity-select" class="select-input">
                            <option value="9.81">游깴 Tierra - 9.81 m/s</option>
                            <option value="1.62">游깿 Luna - 1.62 m/s</option>
                            <option value="3.72">游댮 Marte - 3.72 m/s</option>
                        </select>
                    </div>
                </div>
                
                <!-- Simulation Status -->
                <div class="simulation-status" id="simulation-status">
                    <span class="simulation-status__dot"></span>
                    <span class="simulation-status__text" data-i18n="statusReady">Listo para simular</span>
                </div>
                
                <!-- Buttons -->
                <div class="control-buttons">
                    <button id="simulate-btn" class="btn btn--primary btn--simulate-ready" type="button">
                        <span data-i18n="simulate">Simular</span>
                    </button>
                    <div class="control-buttons__secondary">
                        <button id="pause-btn" class="btn btn--secondary" type="button" disabled>
                            <span data-i18n="pause">Pausar</span>
                        </button>
                        <button id="reset-btn" class="btn btn--secondary" type="button" disabled>
                            <span data-i18n="reset">Reiniciar</span>
                        </button>
                    </div>
                </div>
            </aside>
            
            <!-- Simulation Area -->
            <section class="simulation-area" aria-label="츼rea de Simulaci칩n">
                <div class="canvas-container">
                    <canvas id="simulation-canvas" class="simulation-canvas">
                        Tu navegador no soporta el elemento canvas.
                    </canvas>
                    <!-- Canvas Loading Indicator -->
                    <div id="canvas-loading" class="canvas-loading" aria-hidden="true">
                        <div class="canvas-loading__spinner"></div>
                        <span class="canvas-loading__text" data-i18n="calculating">Calculando trayectoria...</span>
                    </div>
                </div>
                
                <!-- Results -->
                <div class="results-panel" aria-live="polite">
                    <h2 class="results-panel__title" data-i18n="resultsTitle">Resultados de la Simulaci칩n</h2>
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="19" x2="12" y2="5"/>
                                    <polyline points="5,12 12,5 19,12"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label" data-i18n="maxHeight">Altura m치xima</span>
                                <span class="result-card__value"><span id="result-max-height">0.0</span><span class="result-card__unit">m</span></span>
                            </div>
                        </div>
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                    <polyline points="12,5 19,12 12,19"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label" data-i18n="distance">Distancia</span>
                                <span class="result-card__value"><span id="result-distance">0.0</span><span class="result-card__unit">m</span></span>
                            </div>
                        </div>
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12,6 12,12 16,14"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label" data-i18n="flightTime">Tiempo de vuelo</span>
                                <span class="result-card__value"><span id="result-flight-time">0.00</span><span class="result-card__unit">s</span></span>
                            </div>
                        </div>
                        <div class="result-card">
                            <div class="result-card__icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                                </svg>
                            </div>
                            <div class="result-card__content">
                                <span class="result-card__label" data-i18n="finalVelocity">Velocidad final</span>
                                <span class="result-card__value"><span id="result-final-velocity">0.0</span><span class="result-card__unit">m/s</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Formulas -->
                <details class="formulas-section">
                    <summary class="formulas-section__toggle" data-i18n="viewFormulas">游늻 Ver F칩rmulas F칤sicas</summary>
                    <div class="formulas-section__content">
                        <div class="formula-card">
                            <h3 data-i18n="trajectory">Trayectoria</h3>
                            <p class="formula">$y = x \tan(\theta) - \frac{gx^2}{2v_0^2\cos^2(\theta)}$</p>
                        </div>
                        <div class="formula-card">
                            <h3 data-i18n="position">Posici칩n</h3>
                            <p class="formula">$x(t) = v_0 \cos(\theta) \cdot t$</p>
                            <p class="formula">$y(t) = h_0 + v_0 \sin(\theta) \cdot t - \frac{1}{2}gt^2$</p>
                        </div>
                    </div>
                </details>
            </section>
        </div>
    </main>
    
    <footer class="footer">
        <p data-i18n="footer">Hecho con 仇벒잺 para Estudiantes de F칤sica</p>
    </footer>

    <!-- History Overlay -->
    <div id="history-overlay" class="history-overlay"></div>
    
    <!-- Toast Notifications Container -->
    <div id="toast-container" class="toast-container"></div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
